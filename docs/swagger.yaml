basePath: /api/v1
definitions:
  auth.TokenPair:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      refresh_token:
        type: string
    type: object
  errors.Code:
    enum:
    - 0
    - 1001
    - 1002
    - 1003
    - 1004
    - 1005
    - 1006
    - 1007
    - 1008
    - 2001
    - 2002
    - 2003
    - 2004
    - 3001
    - 3002
    - 3003
    - 3004
    - 4001
    - 4002
    - 4003
    - 4004
    type: integer
    x-enum-varnames:
    - Success
    - ErrBadRequest
    - ErrUnauthorized
    - ErrForbidden
    - ErrNotFound
    - ErrMethodNotAllowed
    - ErrConflict
    - ErrTooManyRequests
    - ErrInternalServer
    - ErrInvalidParams
    - ErrBindJSON
    - ErrBindQuery
    - ErrBindForm
    - ErrDatabase
    - ErrRecordNotFound
    - ErrRecordExists
    - ErrRecordInvalidate
    - ErrTokenInvalid
    - ErrTokenExpired
    - ErrTokenMissing
    - ErrPermissionDenied
  handler.LoginRequest:
    properties:
      password:
        type: string
      username:
        type: string
    required:
    - password
    - username
    type: object
  handler.RefreshTokenRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  handler.RegisterRequest:
    properties:
      email:
        type: string
      nickname:
        maxLength: 50
        type: string
      password:
        minLength: 6
        type: string
      username:
        maxLength: 50
        minLength: 3
        type: string
    required:
    - email
    - password
    - username
    type: object
  model.AuditLog:
    properties:
      action:
        description: 操作动作（如：create, update, delete, login）
        type: string
      created_at:
        type: string
      duration:
        description: 请求耗时（毫秒）
        type: integer
      error:
        description: 错误信息
        type: string
      extra:
        description: 额外信息（JSON）
        type: string
      id:
        type: integer
      ip:
        description: 客户端 IP
        type: string
      method:
        description: HTTP 方法
        type: string
      path:
        description: 请求路径
        type: string
      request:
        description: 请求体（可选）
        type: string
      resource:
        description: 操作资源（如：user, file, role）
        type: string
      resource_id:
        description: 资源ID
        type: string
      response:
        description: 响应体（可选）
        type: string
      status_code:
        description: HTTP 状态码
        type: integer
      updated_at:
        type: string
      user_agent:
        description: User Agent
        type: string
      user_id:
        description: 用户ID
        type: integer
      username:
        description: 用户名
        type: string
    type: object
  model.File:
    properties:
      bucket_name:
        description: 存储桶名称（OSS/S3）
        type: string
      category:
        description: '文件分类: avatar, document, image, video, other'
        type: string
      created_at:
        type: string
      extension:
        description: 文件扩展名
        type: string
      hash:
        description: 文件 Hash（MD5/SHA256）
        type: string
      height:
        description: 图片高度
        type: integer
      id:
        type: integer
      mime_type:
        description: MIME 类型
        type: string
      original_name:
        description: 原始文件名
        type: string
      path:
        description: 文件存储路径
        type: string
      saved_name:
        description: 保存的文件名（UUID）
        type: string
      size:
        description: 文件大小（字节）
        type: integer
      status:
        description: '状态: 1=正常, 2=已删除, 3=审核中'
        type: integer
      storage_type:
        description: '存储类型: local, oss, s3'
        type: string
      thumbnail_path:
        description: 可选：缩略图相关
        type: string
      thumbnail_url:
        description: 缩略图 URL
        type: string
      updated_at:
        type: string
      uploaded_by:
        description: 上传用户ID
        type: integer
      url:
        description: 访问 URL
        type: string
      width:
        description: 可选：元数据
        type: integer
    type: object
  model.Task:
    properties:
      created_at:
        type: string
      error:
        description: 错误信息
        type: string
      id:
        type: integer
      max_retry:
        description: 最大重试次数
        type: integer
      name:
        description: 任务名称
        type: string
      payload:
        description: 任务载荷（JSON）
        type: string
      retry_count:
        description: 重试次数
        type: integer
      status:
        description: 任务状态
        type: string
      task_id:
        description: 任务ID（UUID）
        type: string
      type:
        description: '任务类型: async, scheduled'
        type: string
      updated_at:
        type: string
      user_id:
        description: 关联用户ID（可选）
        type: integer
    type: object
  response.Response:
    properties:
      code:
        $ref: '#/definitions/errors.Code'
      data: {}
      message:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: support@example.com
    name: API Support
    url: https://github.com/cccvno1/nova
  description: |-
    Nova 是一个基于 Go + Echo 的现代化 Web 应用框架，提供用户认证、RBAC 权限管理、文件上传、异步任务队列、审计日志等功能。

    主要特性：
    - 用户认证与授权（JWT）
    - RBAC 权限管理（基于 Casbin）
    - 文件上传与管理（支持本地/OSS/S3）
    - 异步任务队列（基于 Redis）
    - 定时任务调度（基于 Cron）
    - 审计日志（自动记录所有操作）
    - 限流保护（IP/用户维度）
    - 健康检查与监控
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Nova API
  version: "1.0"
paths:
  /audit-logs:
    get:
      consumes:
      - application/json
      description: 查询审计日志列表，支持多条件过滤和分页
      parameters:
      - description: 用户ID
        in: query
        name: user_id
        type: integer
      - description: 操作类型
        in: query
        name: action
        type: string
      - description: 资源类型
        in: query
        name: resource
        type: string
      - description: IP地址
        in: query
        name: ip
        type: string
      - description: HTTP方法
        in: query
        name: method
        type: string
      - description: 请求路径
        in: query
        name: path
        type: string
      - description: HTTP状态码
        in: query
        name: status_code
        type: integer
      - description: 开始时间(RFC3339格式)
        in: query
        name: start_time
        type: string
      - description: 结束时间(RFC3339格式)
        in: query
        name: end_time
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审计日志列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.AuditLog'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取审计日志列表
      tags:
      - 审计日志
  /audit-logs/{id}:
    get:
      consumes:
      - application/json
      description: 根据ID获取审计日志的详细信息
      parameters:
      - description: 审计日志ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审计日志详情
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.AuditLog'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 审计日志不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取审计日志详情
      tags:
      - 审计日志
  /audit-logs/clean:
    delete:
      consumes:
      - application/json
      description: 清理指定天数之前的审计日志（物理删除）
      parameters:
      - default: 90
        description: 保留天数
        in: query
        name: days
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除结果(包含删除数量和截止时间)
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 清理旧审计日志
      tags:
      - 审计日志
  /audit-logs/stats:
    get:
      consumes:
      - application/json
      description: 获取审计日志的综合统计信息，包括总数、成功/失败数、操作统计、用户统计和资源统计
      parameters:
      - default: 7天前
        description: 开始时间(RFC3339格式)
        in: query
        name: start_time
        type: string
      - default: 当前时间
        description: 结束时间(RFC3339格式)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 统计信息
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取综合统计
      tags:
      - 审计日志
  /audit-logs/stats/actions:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内的操作类型统计
      parameters:
      - default: 24小时前
        description: 开始时间(RFC3339格式)
        in: query
        name: start_time
        type: string
      - default: 当前时间
        description: 结束时间(RFC3339格式)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 操作统计列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    type: object
                  type: array
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取操作统计
      tags:
      - 审计日志
  /audit-logs/stats/resources:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内的资源操作统计
      parameters:
      - default: 7天前
        description: 开始时间(RFC3339格式)
        in: query
        name: start_time
        type: string
      - default: 当前时间
        description: 结束时间(RFC3339格式)
        in: query
        name: end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 资源统计列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    type: object
                  type: array
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取资源统计
      tags:
      - 审计日志
  /audit-logs/stats/users:
    get:
      consumes:
      - application/json
      description: 获取指定时间范围内操作最频繁的用户统计（Top N）
      parameters:
      - default: 7天前
        description: 开始时间(RFC3339格式)
        in: query
        name: start_time
        type: string
      - default: 当前时间
        description: 结束时间(RFC3339格式)
        in: query
        name: end_time
        type: string
      - default: 10
        description: 返回数量
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 用户统计列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    type: object
                  type: array
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取用户统计
      tags:
      - 审计日志
  /audit-logs/user/{userId}:
    get:
      consumes:
      - application/json
      description: 查询指定用户的审计日志列表
      parameters:
      - description: 用户ID
        in: path
        name: userId
        required: true
        type: integer
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 审计日志列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.AuditLog'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取用户审计日志
      tags:
      - 审计日志
  /auth/login:
    post:
      consumes:
      - application/json
      description: 使用用户名和密码登录，返回访问令牌和刷新令牌
      parameters:
      - description: 登录信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功，返回访问令牌和刷新令牌
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/auth.TokenPair'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 用户名或密码错误
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 用户登录
      tags:
      - 认证
  /auth/logout:
    post:
      consumes:
      - application/json
      description: 登出当前用户，将访问令牌加入黑名单
      produces:
      - application/json
      responses:
        "200":
          description: 登出成功
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权或令牌无效
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 用户登出
      tags:
      - 认证
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: 使用刷新令牌获取新的访问令牌
      parameters:
      - description: 刷新令牌
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 刷新成功，返回新的访问令牌
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 刷新令牌无效或已过期
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 刷新访问令牌
      tags:
      - 认证
  /auth/register:
    post:
      consumes:
      - application/json
      description: 创建新用户账号
      parameters:
      - description: 注册信息
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: 注册成功，返回访问令牌和刷新令牌
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/auth.TokenPair'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "409":
          description: 用户名或邮箱已存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      summary: 用户注册
      tags:
      - 认证
  /files:
    get:
      consumes:
      - application/json
      description: 获取当前用户的文件列表，支持分类过滤和分页
      parameters:
      - description: 文件分类
        enum:
        - avatar
        - document
        - image
        - video
        - audio
        - other
        in: query
        name: category
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 文件列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.File'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取文件列表
      tags:
      - 文件管理
  /files/{id}:
    delete:
      consumes:
      - application/json
      description: 根据ID删除指定文件（逻辑删除）
      parameters:
      - description: 文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "403":
          description: 无权限删除该文件
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 文件不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 删除文件
      tags:
      - 文件管理
    get:
      consumes:
      - application/json
      description: 根据ID获取文件的详细信息
      parameters:
      - description: 文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 文件详情
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.File'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 文件不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取文件详情
      tags:
      - 文件管理
  /files/{id}/download:
    get:
      consumes:
      - application/json
      description: 根据文件ID下载文件，支持断点续传
      parameters:
      - description: 文件ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/octet-stream
      responses:
        "200":
          description: 文件流
          schema:
            type: file
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 文件不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 下载文件
      tags:
      - 文件管理
  /files/search:
    get:
      consumes:
      - application/json
      description: 根据关键词搜索文件名，支持分页
      parameters:
      - description: 搜索关键词
        in: query
        name: keyword
        required: true
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 搜索结果
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.File'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 搜索文件
      tags:
      - 文件管理
  /files/storage/info:
    get:
      consumes:
      - application/json
      description: 获取当前用户的存储空间使用情况统计
      produces:
      - application/json
      responses:
        "200":
          description: 存储空间信息
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取存储空间信息
      tags:
      - 文件管理
  /files/upload:
    post:
      consumes:
      - multipart/form-data
      description: 上传文件到服务器，支持图片自动生成缩略图
      parameters:
      - description: 要上传的文件
        in: formData
        name: file
        required: true
        type: file
      - default: other
        description: 文件分类
        enum:
        - avatar
        - document
        - image
        - video
        - audio
        - other
        in: formData
        name: category
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功，返回文件信息
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.File'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "413":
          description: 文件过大
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 上传文件
      tags:
      - 文件管理
  /files/upload/avatar:
    post:
      consumes:
      - multipart/form-data
      description: 上传头像文件（仅支持图片格式：jpg, jpeg, png, gif, webp）
      parameters:
      - description: 头像文件
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: 上传成功
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.File'
              type: object
        "400":
          description: 请求参数错误或文件格式不支持
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 上传用户头像
      tags:
      - 文件管理
  /tasks:
    get:
      consumes:
      - application/json
      description: 查询任务列表，支持按状态和类型过滤，默认查询待处理任务
      parameters:
      - description: 任务状态
        enum:
        - pending
        - processing
        - success
        - failed
        in: query
        name: status
        type: string
      - description: 任务类型
        in: query
        name: type
        type: string
      - default: 1
        description: 页码
        in: query
        name: page
        type: integer
      - default: 10
        description: 每页数量
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 任务列表
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/model.Task'
                  type: array
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取任务列表
      tags:
      - 任务管理
  /tasks/{id}:
    get:
      consumes:
      - application/json
      description: 根据数据库ID获取任务的详细信息
      parameters:
      - description: 任务ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 任务详情
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Task'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取任务详情
      tags:
      - 任务管理
  /tasks/stats:
    get:
      consumes:
      - application/json
      description: 获取各状态任务的数量统计
      produces:
      - application/json
      responses:
        "200":
          description: 统计信息(包含pending, processing, success, failed, total)
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  type: object
              type: object
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 获取任务统计
      tags:
      - 任务管理
  /tasks/task/{taskId}:
    get:
      consumes:
      - application/json
      description: 根据业务任务ID（task_id字段）查询任务信息
      parameters:
      - description: 业务任务ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 任务详情
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/model.Task'
              type: object
        "400":
          description: 请求参数错误
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: 未授权
          schema:
            $ref: '#/definitions/response.Response'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/response.Response'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: 根据任务ID查询
      tags:
      - 任务管理
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
